<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Alaman - –ü–æ–∏—Å–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π</title>
    <style>
        body { font-family: 'Inter', sans-serif; background: #F2F4F7; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .app-card { background: white; border-radius: 24px; padding: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); width: 100%; max-width: 480px; }
        h2 { font-size: 22px; font-weight: 800; text-align: center; margin-bottom: 25px; color: #101828; }
        .input-group { margin-bottom: 20px; }
        .section-label { font-size: 11px; font-weight: 700; color: #667085; text-transform: uppercase; margin-bottom: 8px; display: block; }
        input, select { width: 100%; padding: 14px; border: 1.5px solid #EAECF0; border-radius: 12px; font-size: 14px; box-sizing: border-box; background: #FCFCFD; }
        .search-btn { background: #007AFF; color: white; width: 100%; padding: 18px; border: none; border-radius: 16px; font-size: 16px; font-weight: 700; cursor: pointer; }
        .tender-card { background: white; padding: 20px; border-radius: 18px; margin-top: 12px; border-left: 6px solid #12B76A; width: 100%; max-width: 480px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        .price { font-weight: 800; color: #027A48; font-size: 19px; }
    </style>
</head>
<body>
<div class="app-card">
    <h2>–ü–æ–∏—Å–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π üîç</h2>
    <div class="input-group">
        <span class="section-label">–ú–µ—Å—Ç–æ –ø–æ—Å—Ç–∞–≤–∫–∏ (–ö–ê–¢–û)</span>
        <input type="text" id="cityInput" list="kato-list" placeholder="–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥" value="–≥. –ö—ã–∑—ã–ª–æ—Ä–¥–∞">
        <datalist id="kato-list">
            <option value="–≥. –ê—Å—Ç–∞–Ω–∞"><option value="–≥. –ê–ª–º–∞—Ç—ã"><option value="–≥. –ö–∞—Ä–∞–≥–∞–Ω–¥–∞"><option value="–≥. –ö—ã–∑—ã–ª–æ—Ä–¥–∞">
        </datalist>
    </div>
    <div class="input-group">
        <span class="section-label">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</span>
        <input type="text" id="searchInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —Ä–µ–º–æ–Ω—Ç" value="—Ä–µ–º–æ–Ω—Ç">
    </div>
    <div class="input-group">
        <span class="section-label">–°—Ç–∞—Ç—É—Å</span>
        <select id="statusSelect">
            <option value="350">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</option>
            <option value="210">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ</option>
        </select>
    </div>
    <button class="search-btn" onclick="fetchData()">–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
</div>
<div id="results"></div>

<script>
    async function fetchData() {
        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = "<p style='text-align:center'>–ü–æ–∏—Å–∫ –≤ Goszakup...</p>";
        
        const filters = {
            city: document.getElementById('cityInput').value,
            keyword: document.getElementById('searchInput').value,
            status: document.getElementById('statusSelect').value
        };

        try {
            // Bilgisayarƒ±ndaki yerel bota baƒülanmayƒ± dener
            const response = await fetch('http://127.0.0.1:5000/search', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(filters)
            });
            const data = await response.json();
            
            resultsDiv.innerHTML = data.map(t => `
                <div class="tender-card">
                    <div class="price">${t.price} ‚Ç∏</div>
                    <div style="font-size:14px; margin:8px 0; font-weight:600;">${t.title}</div>
                    <div style="font-size:12px; color:gray; border-top:1px solid #eee; padding-top:8px;">
                        ‚Ññ: ${t.no} | –°—Ç–∞—Ç—É—Å: ${t.status}
                    </div>
                </div>`).join('');
        } catch (e) {
            resultsDiv.innerHTML = "<p style='color:red; text-align:center;'>Hata: bot.py √ßalƒ±≈ümƒ±yor! L√ºtfen terminali kontrol edin.</p>";
        }
    }
</script>
</body>
</html>
